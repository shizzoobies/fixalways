---
import BaseLayout from "../layouts/BaseLayout.astro";
import { floridaCities } from "../data/fl-cities.js";

const toSlug = (city) => city.toLowerCase().trim().replace(/\s+/g, "-");
---

<BaseLayout
  title="FixAlways – Florida HVAC"
  description="Find HVAC companies across Florida. Start with a city, then browse local listings."
  badge="Florida • HVAC"
>
  <section class="hero">
    <div class="heroMedia">
      <img class="heroBase" src="/assets/hero/desktop.webp" alt="" aria-hidden="true" />

      <picture>
        <source srcset="/assets/hero/accent-right.webp" type="image/webp" />
        <img
          class="heroAccentRight"
          src="/assets/hero/accent-right.png"
          alt=""
          aria-hidden="true"
          loading="lazy"
        />
      </picture>

      <img class="heroOverlaySvg" src="/assets/hero/hero-overlay.svg" alt="" aria-hidden="true" loading="lazy" />
      <div class="heroOverlay" aria-hidden="true"></div>

      <div class="heroPanel">
        <div class="heroEyebrow">Florida • HVAC</div>
        <h1>Florida HVAC listings</h1>
        <p>
          Pick a city to see local HVAC companies pulled from Google Places. We’ll keep expanding coverage and
          refreshing data.
        </p>
      </div>
    </div>
  </section>

  <div class="grid">
    <section class="card">
      <div class="cardHeader">
        <h2>Browse cities</h2>
        <div class="meta">{floridaCities.length} cities in list</div>
      </div>

      <!-- ✅ MUST be cityList -->
      <ul class="list cityGrid" id="cityList">
        {floridaCities.map((city) => {
          const href = `/fl/${toSlug(city)}/hvac`;
          return (
            <li class="item" data-city={city} data-href={href}>
              <div class="left">
                <div class="name">{city}</div>
                <div class="sub">See HVAC companies, ratings, and contact info</div>
              </div>

              <div class="right">
                <div class="btnRow">
                  <a class="btn" href={href}>View listings</a>
                </div>
              </div>
            </li>
          );
        })}
      </ul>
    </section>
  </div>
</BaseLayout>
